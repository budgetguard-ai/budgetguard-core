# BudgetGuard Dashboard

<div align="center">

![React](https://img.shields.io/badge/React-18-blue.svg)
![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue.svg)
![Material-UI](https://img.shields.io/badge/Material--UI-5.0-blue.svg)
![Vite](https://img.shields.io/badge/Vite-4.0-646CFF.svg)

A modern React dashboard for managing the BudgetGuard AI proxy system, built with Material Design 3.

[Live Demo](#screenshots) ‚Ä¢ [Quick Start](#quick-start) ‚Ä¢ [API Reference](#api-integration) ‚Ä¢ [Deployment](#production-deployment)

</div>

## ‚ú® Features

### üè† System Overview
- **Real-time Health Monitoring** - Database, Redis, and AI provider status
- **System Metrics** - Request volumes, response times, error rates
- **Alert Dashboard** - Critical system notifications and warnings
- **Quick Actions** - Common administrative tasks at a glance

### üë• Tenant Management
- **Tenant List** - View all tenants with search and filtering
- **Tenant Creation** - Add new tenants with budget and rate limit setup
- **Tenant Editing** - Modify tenant settings, budgets, and permissions
- **Bulk Operations** - Mass updates for multiple tenants

### üí∞ Budget & Usage Analytics
- **Budget Overview** - Visual budget utilization across all tenants
- **Usage Trends** - Historical usage patterns and forecasting
- **Cost Breakdown** - Per-model and per-tenant cost analysis
- **Budget Alerts** - Configurable threshold notifications

### üîë API Key Management
- **Key Generation** - Create tenant-specific API keys
- **Key Rotation** - Secure key lifecycle management
- **Usage Tracking** - Monitor API key usage patterns
- **Permission Control** - Granular access controls per key

### üé® User Experience
- **Material Design 3** - Modern, accessible UI components
- **Light/Dark Themes** - Automatic and manual theme switching
- **Responsive Design** - Optimized for desktop, tablet, and mobile
- **Offline Support** - Service worker for offline functionality

## üöÄ Quick Start

### Prerequisites
- Node.js 18+
- BudgetGuard API server running
- Admin API key configured

### 1. Environment Setup

```bash
# Navigate to dashboard directory
cd src/dashboard

# Install dependencies
npm install

# Copy environment template
cp .env.example .env
```

### 2. Configuration

Edit `.env` with your settings:

```env
# API Configuration
VITE_API_BASE_URL=http://localhost:3000
VITE_ADMIN_API_KEY=your-secure-admin-key-here

# Optional: Dashboard Configuration
VITE_APP_TITLE="BudgetGuard Dashboard"
VITE_DEFAULT_THEME=light
VITE_ENABLE_ANALYTICS=false
```

### 3. Development Server

```bash
# Start development server
npm run dev

# Dashboard available at: http://localhost:3001
```

### 4. Production Build

```bash
# Build for production
npm run build

# Or build from project root
cd ../../
npm run build:dashboard
```

## üì± Screenshots

### Tenant Management
![Tenant Management](screenshots/tenant-management.png)
- Tenant list with search/filter
- Budget utilization indicators
- Bulk action controls

### Usage Reports
![Usage Reports](screenshots/usage-reports.png)
- Interactive charts
- Cost breakdown by model
- Usage trend analysis

### Dark Theme
![Dahboard-Dark](screenshots/dashboard-dark.png)
- Complete dark mode support
- Consistent Material Design 3 theming

## üèóÔ∏è Architecture

### Tech Stack

| Technology | Purpose | Version |
|------------|---------|---------|
| **React** | UI Framework | 18.x |
| **TypeScript** | Type Safety | 5.x |
| **Material-UI** | Component Library | 5.x |
| **Vite** | Build Tool | 4.x |
| **React Query** | API State Management | 4.x |
| **Zustand** | Global State | 4.x |
| **React Router** | Navigation | 6.x |
| **Chart.js** | Data Visualization | 4.x |

### Project Structure

```
src/dashboard/
‚îú‚îÄ‚îÄ public/                     # Static assets
‚îÇ   ‚îú‚îÄ‚îÄ favicon.ico
‚îÇ   ‚îî‚îÄ‚îÄ manifest.json
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/             # Reusable UI components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common/            # Generic components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoadingSpinner.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ErrorBoundary.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ConfirmDialog.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ charts/            # Chart components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BudgetChart.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UsageChart.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MetricsChart.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dialogs/           # Modal dialogs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CreateTenantDialog.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EditTenantDialog.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ManageApiKeysDialog.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ layout/            # Layout components
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ DashboardLayout.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Sidebar.tsx
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ Header.tsx
‚îÇ   ‚îú‚îÄ‚îÄ pages/                 # Main dashboard pages
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Overview.tsx       # System health dashboard
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Tenants.tsx        # Tenant management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Usage.tsx          # Usage analytics
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Models.tsx         # Model pricing management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Settings.tsx       # System settings
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UsageHistory.tsx   # Historical usage data
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                 # Custom React hooks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useApi.ts          # API integration hooks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useStore.ts        # Global state management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useTheme.ts        # Theme management
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useUsageAnalytics.ts # Analytics hooks
‚îÇ   ‚îú‚îÄ‚îÄ services/              # External services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.ts             # API client
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ storage.ts         # Local storage utilities
‚îÇ   ‚îú‚îÄ‚îÄ types/                 # TypeScript definitions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts           # Common types
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.ts             # API response types
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ charts.ts          # Chart data types
‚îÇ   ‚îú‚îÄ‚îÄ utils/                 # Helper functions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ currency.ts        # Currency formatting
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ date.ts            # Date utilities
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validation.ts      # Input validation
‚îÇ   ‚îú‚îÄ‚îÄ theme.ts               # Material Design 3 theme
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx                # Main React app
‚îÇ   ‚îî‚îÄ‚îÄ main.tsx               # React entry point
‚îú‚îÄ‚îÄ screenshots/               # Dashboard screenshots
‚îú‚îÄ‚îÄ .env.example              # Environment template
‚îú‚îÄ‚îÄ package.json              # Dependencies
‚îú‚îÄ‚îÄ vite.config.ts            # Vite configuration
‚îú‚îÄ‚îÄ tsconfig.json             # TypeScript config
‚îî‚îÄ‚îÄ README.md                 # This file
```

## üîå API Integration

### Authentication

The dashboard uses the admin API key for authentication:

```typescript
// Automatic header injection
const apiClient = axios.create({
  baseURL: import.meta.env.VITE_API_BASE_URL,
  headers: {
    'X-Admin-Key': import.meta.env.VITE_ADMIN_API_KEY,
    'Content-Type': 'application/json'
  }
});
```

### API Endpoints Used

| Endpoint | Method | Purpose |
|----------|--------|---------|
| `/health` | GET | System health check |
| `/admin/tenant` | GET, POST | Tenant management |
| `/admin/tenant/:id` | GET, PUT, DELETE | Individual tenant operations |
| `/admin/tenant/:id/budgets` | GET, POST | Budget management |
| `/admin/tenant/:id/apikeys` | GET, POST, DELETE | API key management |
| `/admin/tenant/:id/ratelimit` | GET, PUT | Rate limit configuration |
| `/admin/model-pricing` | GET, POST, PUT | Model pricing management |
| `/admin/usage-ledger` | GET | Usage analytics data |

### Error Handling

```typescript
// Centralized error handling
const handleApiError = (error: AxiosError) => {
  if (error.response?.status === 401) {
    // Redirect to login or show auth error
    showNotification('Authentication failed', 'error');
  } else if (error.response?.status >= 500) {
    // Server error
    showNotification('Server error occurred', 'error');
  } else {
    // Client error
    showNotification(error.message, 'warning');
  }
};
```

## üé® Theming & Customization

### Material Design 3 Implementation

```typescript
// theme.ts
export const createTheme = (mode: 'light' | 'dark') => ({
  palette: {
    mode,
    primary: {
      main: '#6750A4',
      light: '#9A82DB',
      dark: '#4F378B',
    },
    secondary: {
      main: '#625B71',
      light: '#958DA5',
      dark: '#4A4458',
    },
    // ... additional palette configuration
  },
  typography: {
    fontFamily: '"Inter", "Roboto", "Helvetica", "Arial", sans-serif',
    // Material Design 3 typography scale
  },
  shape: {
    borderRadius: 12, // Material Design 3 rounded corners
  },
});
```

### Custom Components

```typescript
// Custom themed components
const StyledCard = styled(Card)(({ theme }) => ({
  borderRadius: theme.shape.borderRadius,
  boxShadow: theme.shadows[1],
  transition: theme.transitions.create(['box-shadow']),
  '&:hover': {
    boxShadow: theme.shadows[4],
  },
}));
```

## üè≠ Production Deployment

### Environment Variables

```env
# Production configuration
VITE_API_BASE_URL=https://your-budgetguard-api.com
VITE_ADMIN_API_KEY=your-production-admin-key
VITE_APP_TITLE=BudgetGuard Production
VITE_ENABLE_ANALYTICS=true
VITE_SENTRY_DSN=your-sentry-dsn
```

### Build Optimization

```bash
# Production build with optimizations
npm run build

# Analyze bundle size
npm run build:analyze

# Preview production build
npm run preview
```

### Docker Deployment

```dockerfile
# Multi-stage build for dashboard
FROM node:18-alpine as dashboard-builder
WORKDIR /app/dashboard
COPY src/dashboard/package*.json ./
RUN npm ci --only=production
COPY src/dashboard/ ./
RUN npm run build

FROM nginx:alpine
COPY --from=dashboard-builder /app/dashboard/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

### CDN Integration

```typescript
// vite.config.ts for CDN deployment
export default defineConfig({
  base: 'https://cdn.your-domain.com/budgetguard-dashboard/',
  build: {
    assetsDir: 'assets',
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom'],
          mui: ['@mui/material', '@mui/icons-material'],
        },
      },
    },
  },
});
```

## üîß Development

### Available Scripts

```bash
# Development
npm run dev              # Start dev server
npm run dev:host         # Start with network access

# Building
npm run build            # Production build
npm run build:analyze    # Build with bundle analyzer
npm run preview          # Preview production build

# Code Quality
npm run lint             # ESLint checking
npm run lint:fix         # Auto-fix ESLint issues
npm run type-check       # TypeScript checking
npm run format           # Prettier formatting

# Testing
npm run test             # Run tests
npm run test:ui          # Tests with UI
npm run test:coverage    # Coverage report
```

### Code Standards

- **ESLint** with React and TypeScript rules
- **Prettier** for code formatting
- **Husky** for git hooks
- **TypeScript strict mode** enabled

### Contributing to Dashboard

1. Follow the [main contributing guide](../../CONTRIBUTING.md)
2. Dashboard-specific guidelines:
   - Use Material-UI components when possible
   - Follow Material Design 3 principles
   - Ensure responsive design on all screen sizes
   - Add proper TypeScript types for all props
   - Include error boundaries for robust UX

## üêõ Troubleshooting

### Common Issues

**Dashboard not loading**
```bash
# Check API connection
curl -H "X-Admin-Key: your-key" http://localhost:3000/health

# Check environment variables
echo $VITE_API_BASE_URL
echo $VITE_ADMIN_API_KEY
```

**Build errors**
```bash
# Clear cache
rm -rf node_modules dist
npm install

# Check TypeScript errors
npm run type-check
```

**API authentication errors**
- Verify admin API key is correct
- Check API server is running
- Ensure CORS is configured properly

### Performance Optimization

```typescript
// Code splitting for better performance
const TenantManagement = lazy(() => import('./pages/Tenants'));
const UsageAnalytics = lazy(() => import('./pages/Usage'));

// Memoization for expensive calculations
const expensiveCalculation = useMemo(() => {
  return calculateUsageMetrics(usageData);
}, [usageData]);
```

## üìä Analytics & Monitoring

### Built-in Analytics

The dashboard includes optional analytics:

```typescript
// Track user interactions
const trackEvent = (event: string, properties?: object) => {
  if (import.meta.env.VITE_ENABLE_ANALYTICS === 'true') {
    // Send to analytics service
    analytics.track(event, properties);
  }
};
```

### Error Monitoring

```typescript
// Sentry integration for error tracking
if (import.meta.env.PROD) {
  Sentry.init({
    dsn: import.meta.env.VITE_SENTRY_DSN,
    environment: import.meta.env.MODE,
  });
}
```

## üîÆ Roadmap

### Current Features (v1.0)
- ‚úÖ System overview and health monitoring
- ‚úÖ Basic tenant management
- ‚úÖ Material Design 3 theming
- ‚úÖ Responsive design

### Planned Features (v1.1)
- üîÑ Real-time usage charts
- üîÑ Advanced budget management
- üîÑ API key lifecycle management
- üîÑ Custom alerts and notifications

### Future Features (v2.0)
- üìÖ Multi-tenant dashboards
- üìÖ Advanced analytics and reporting
- üìÖ Custom policy management UI
- üìÖ Integration with external tools

---

<div align="center">

**Need help?** Check the [main documentation](../../README.md) or [create an issue](https://github.com/budgetguard-ai/budgetguard-core/issues).

[‚¨Ü Back to top](#budgetguard-dashboard)

</div>